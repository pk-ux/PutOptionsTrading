"""
Screening-related Pydantic schemas
- Portions generated by AI
"""

from typing import List, Dict, Any, Optional
from pydantic import BaseModel


class ScreenRequest(BaseModel):
    """Request model for screening options"""
    symbols: List[str]
    max_dte: int = 45
    min_dte: int = 15
    min_volume: int = 10
    min_open_interest: int = 10
    min_annualized_return: float = 20.0
    max_assignment_probability: int = 20


class OptionResult(BaseModel):
    """Single option result"""
    symbol: str
    current_price: float
    strike: float
    premium: float
    annualized_return: float
    daily_decay_contract: Optional[float] = None
    prob_assign: float
    expiry: str
    dte: int
    volume: int
    open_interest: int
    implied_volatility: float


class ScreenResponse(BaseModel):
    """Response model for screening"""
    success: bool
    results: Dict[str, List[Dict[str, Any]]]  # symbol -> list of options
    screens_remaining: Optional[int] = None
    used_yahoo_fallback: bool = False
    message: str = ""


class NewsItem(BaseModel):
    """News item schema"""
    title: str
    url: str
    published: Optional[str] = None
    date_display: Optional[str] = None
    source: Optional[str] = None


class NewsResponse(BaseModel):
    """Response model for news endpoint"""
    symbol: str
    news: List[NewsItem]
    error: Optional[str] = None
