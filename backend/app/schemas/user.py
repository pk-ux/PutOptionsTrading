"""
User-related Pydantic schemas
- Portions generated by AI
"""

from typing import List, Optional
from pydantic import BaseModel, EmailStr


class UserSettingsSchema(BaseModel):
    """User settings schema"""
    symbols: List[str] = ["AAPL", "MSFT", "GOOGL", "SPY", "QQQ"]
    max_dte: int = 45
    min_dte: int = 15
    min_volume: int = 10
    min_open_interest: int = 10
    min_annualized_return: float = 20.0
    max_assignment_probability: int = 20
    
    class Config:
        from_attributes = True


class UserSettingsUpdate(BaseModel):
    """Schema for updating user settings (all fields optional)"""
    symbols: Optional[List[str]] = None
    max_dte: Optional[int] = None
    min_dte: Optional[int] = None
    min_volume: Optional[int] = None
    min_open_interest: Optional[int] = None
    min_annualized_return: Optional[float] = None
    max_assignment_probability: Optional[int] = None


class UserInfo(BaseModel):
    """User information response"""
    id: str
    email: Optional[str] = None
    subscription_status: str
    screens_today: int
    screens_remaining: int
    settings: Optional[UserSettingsSchema] = None
    
    class Config:
        from_attributes = True
